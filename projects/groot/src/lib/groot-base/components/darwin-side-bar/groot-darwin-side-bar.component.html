<ng-container *ngIf="menu && menu.length">
  <div class="menu-tabs">
    <ng-container *ngFor="let tab of menu">

      <ng-container *ngIf="tab">
        <div class="menu-tab"
             [grootNeedsCapability]="tab.requiredCapabilities"
             [ngClass]="tab.additionalClasses"
             [class.selected]="tab == currentFirstLevel"
             [class.open]="tab.open"
             (click)="clickOnFirstLevel(tab)">
          <i *ngIf="tab.icon" class="{{tab.icon}}"></i>
          <img *ngIf="tab.image" [src]="tab.image" alt="Menu image">
          <span class="title">{{tab.label | translate}}</span>
        </div>
      </ng-container>
      <ng-container *ngIf="!tab">
        <div class="menu-tab-empty"></div>
      </ng-container>

    </ng-container>
  </div>

  <div class="menu-items"
       [class.open]="currentFirstLevel && currentFirstLevel.open">
    <ng-container *ngIf="currentFirstLevel && currentFirstLevel.open">
      <div *ngFor="let secondLevel of currentFirstLevel.children"
           [grootNeedsCapability]="secondLevel.requiredCapabilities"
           class="menu-accordion">
        <div class="accordion-title"
             [ngClass]="secondLevel.additionalClasses"
             [class.clickable]="!secondLevel.forcedOpen"
             (click)="clickOnSecondLevel(secondLevel)">
          <span class="title">{{secondLevel.label | translate}}</span>

          <ng-container *ngIf="!secondLevel.forcedOpen">
            <i class="fa fa-angle-down" *ngIf="!secondLevel.open"></i>
            <i class="fa fa-angle-up" *ngIf="secondLevel.open"></i>
          </ng-container>
        </div>

        <div class="accordion-items"
             *ngIf="secondLevel.open"
             [@dropDown]>
          <div *ngFor="let thirdLevel of secondLevel.children"
               [grootNeedsCapability]="thirdLevel.requiredCapabilities"
               class="menu-entry"
               [ngClass]="thirdLevel.additionalClasses"
               [class.selected]="thirdLevel.selected"
               [class.disabled]="thirdLevel.disabled"
               (click)="clickOnThirdLevel(thirdLevel)">
            {{thirdLevel.label | translate}}
          </div>
        </div>
      </div>
    </ng-container>
  </div>
</ng-container>
